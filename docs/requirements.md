# 詳細要件定義

## 1. 技術的な確認事項

### Firebase設定
- **アカウント**: 個人アカウント
- **料金プラン**: Sparkプラン（無料枠）。Rate limitに引っかかった場合は使用不可メッセージを表示
- **地域設定**: asia-northeast1

### 開発環境
- **Node.js**: v18以上の最新安定版、バージョン管理を実施
- **パッケージマネージャー**: npm使用

## 2. 機能仕様の詳細

### 認証方式
- **方式**: 名前入力のみ
- **重複**: 同じルーム内では許可しない（先着順）
- **名前制限**: 2文字以上20文字以下、日本語・英語・数字を許可

### ルーム管理
- **ルームコード**: 20文字、英数字を使用
- **同時接続上限**: 20人（今後変更の可能性あり）
- **ルーム有効期限**: 30分（今後変更の可能性あり）

### お題管理
- **お題**: 事前定義、JSONなどでコード管理
- **カテゴリ分け**: 不要（全ルーム共通）
- **お題制限**: 30文字以下、日本語・英語・数字・記号を許可

## 3. UI/UX要件

### デザインシステム
- **ガイドライン**: シンプルで直感的なUIを目指す
- **カラーパレット**: 明るいトーンを基調
- **フォント**: 読みやすさを重視
- **レスポンシブ**: スマホ・タブレット・PCでの最適化

### 音声・効果
- **MVPフェーズ**: 音声効果は不要（後のフェーズで検討）

## 4. 運用・保守

### 監視・ログ
- **エラー監視**: Sentry等は導入しない、エラー時にSlack通知
- **アクセス解析**: Google Analytics等は導入しない（後のフェーズで検討）
- **パフォーマンス監視**: 導入しない（後のフェーズで検討）

### セキュリティ
- **不適切な回答対策**: MVPではやらない（後のフェーズで検討）
- **スパム対策**: 工数次第。同一IPからの短時間大量アクセス制限
- **レート制限**: 工数次第。一定時間内のリクエスト数制限

## 5. 実装優先度

### MVP（最小実用版）
- [ ] 基本的なルーム作成・参加機能
- [ ] お題表示・回答送信機能
- [ ] 回答公開・一致判定機能
- [ ] シンプルなUI

### Phase 2（拡張版）
- [ ] 音声・視覚効果
- [ ] 詳細なエラーハンドリング
- [ ] パフォーマンス最適化

### Phase 3（運用版）
- [ ] 監視・ログ機能
- [ ] セキュリティ強化
- [ ] 不適切コンテンツ対策

## 6. 技術的制約

### Firebase無料枠制限
- **Firestore**: 読み取り50,000回/日、書き込み20,000回/日
- **Cloud Functions**: 呼び出し2,000,000回/月
- **Hosting**: 10GB/月

### Rate Limit対策
- 制限に達した場合の適切なエラーメッセージ表示
- ユーザーへの制限状況の透明性確保

## 7. 開発時の注意点

### データ設計
- 無料枠を意識した効率的なクエリ設計
- 不要な読み書きを避ける構造

### UI/UX
- ローディング状態の適切な表示
- エラー状態の分かりやすい表示
- モバイルファーストのレスポンシブデザイン